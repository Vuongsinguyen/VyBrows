/**
<<<<<<< HEAD
 * @typedef {import('micromark-util-types').CompileContext} CompileContext
 * @typedef {import('micromark-util-types').Handle} Handle
 * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension
 * @typedef {import('micromark-util-types').Token} Token
 */

import {sanitizeUri} from 'micromark-util-sanitize-uri'

// To do: next major: expose functions that yields extension.

/**
 * Extension for `micromark` that can be passed in `htmlExtensions` to support
 * GFM autolink literals when serializing to HTML.
 *
 * @type {HtmlExtension}
 */
export const gfmAutolinkLiteralHtml = {
  exit: {
    literalAutolinkEmail,
    literalAutolinkHttp,
    literalAutolinkWww
  }
=======
 * @import {CompileContext, Handle, HtmlExtension, Token} from 'micromark-util-types'
 */

import { sanitizeUri } from 'micromark-util-sanitize-uri';

/**
 * Create an HTML extension for `micromark` to support GitHub autolink literal
 * when serializing to HTML.
 *
 * @returns {HtmlExtension}
 *   Extension for `micromark` that can be passed in `htmlExtensions` to
 *   support GitHub autolink literal when serializing to HTML.
 */
export function gfmAutolinkLiteralHtml() {
  return {
    exit: {
      literalAutolinkEmail,
      literalAutolinkHttp,
      literalAutolinkWww
    }
  };
>>>>>>> 08f40ceb (Initial)
}

/**
 * @this {CompileContext}
 * @type {Handle}
 */
function literalAutolinkWww(token) {
<<<<<<< HEAD
  anchorFromToken.call(this, token, 'http://')
=======
  anchorFromToken.call(this, token, 'http://');
>>>>>>> 08f40ceb (Initial)
}

/**
 * @this {CompileContext}
 * @type {Handle}
 */
function literalAutolinkEmail(token) {
<<<<<<< HEAD
  anchorFromToken.call(this, token, 'mailto:')
=======
  anchorFromToken.call(this, token, 'mailto:');
>>>>>>> 08f40ceb (Initial)
}

/**
 * @this {CompileContext}
 * @type {Handle}
 */
function literalAutolinkHttp(token) {
<<<<<<< HEAD
  anchorFromToken.call(this, token)
=======
  anchorFromToken.call(this, token);
>>>>>>> 08f40ceb (Initial)
}

/**
 * @this CompileContext
 * @param {Token} token
 * @param {string | null | undefined} [protocol]
<<<<<<< HEAD
 * @returns {void}
 */
function anchorFromToken(token, protocol) {
  const url = this.sliceSerialize(token)
  this.tag('<a href="' + sanitizeUri((protocol || '') + url) + '">')
  this.raw(this.encode(url))
  this.tag('</a>')
}
=======
 * @returns {undefined}
 */
function anchorFromToken(token, protocol) {
  const url = this.sliceSerialize(token);
  this.tag('<a href="' + sanitizeUri((protocol || '') + url) + '">');
  this.raw(this.encode(url));
  this.tag('</a>');
}
>>>>>>> 08f40ceb (Initial)
