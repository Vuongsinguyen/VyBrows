---
import '/src/styles/global.css';
import '/src/styles/color.css';
import Header from '../components/UI/layout/Header.astro';
import FooterSection from '../components/UI/layout/FooterSection.astro';

export interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props;
const lang = Astro.url.pathname.split('/')[1] || 'en';

// Default meta description if not provided
const metaDescription = description || "VyBrows Academy - Professional permanent makeup training and beauty services. Expert PMU education, microblading courses, and certified beauty training programs.";
const pageTitle = title || "VyBrows Academy - Professional Permanent Makeup & Beauty Services";
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={metaDescription} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={metaDescription} />
    <meta property="og:image" content="https://vybrowsbeauty.com/images/brows%20beauty%20academy%20training.jpeg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="VyBrows Academy - Professional Permanent Makeup Services" />
    <meta property="og:site_name" content="VyBrows Academy" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={pageTitle} />
    <meta property="twitter:description" content={metaDescription} />
    <meta property="twitter:image" content="https://vybrowsbeauty.com/images/brows%20beauty%20academy%20training.jpeg" />
    <meta property="twitter:image:alt" content="VyBrows Academy - Professional Permanent Makeup Services" />
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BeautySalon",
      "name": "Vy Brows Beauty",
      "description": "Professional permanent makeup and beauty studio specializing in microblading, PMU services, and natural beauty enhancements",
      "url": "https://vybrowsbeauty.com",
      "logo": "https://vybrowsbeauty.com/logo.webp",
      "image": "https://vybrowsbeauty.com/logo.webp",
      "telephone": "+84-XXX-XXX-XXX",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "Vietnam"
      },
      "serviceArea": "Vietnam",
      "priceRange": "$$",
      "openingHours": "Mo-Su 09:00-18:00"
    }
    </script>
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" href="/favicon.ico" sizes="any" />
    <title>{pageTitle}</title>
  </head>
  <body class="min-h-screen transition-colors duration-200 bg-primary">
    <script>
      // Auto set data-theme on html for light/dark mode
      /**
       * @param {string} theme
       */
      function setTheme(theme: string) {
        document.documentElement.setAttribute('data-theme', theme);
      }
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        setTheme('dark');
      } else {
        setTheme('light');
      }
      (window as any).setTheme = setTheme;
    </script>
    <Header />
    <!-- Không có BannerFix ở đây để tránh trùng lặp với banner tùy chỉnh trong news detail -->
    <main>
      <section class="flex-1">
        <slot />
      </section>
    </main>
    <FooterSection />
  </body>
</html>