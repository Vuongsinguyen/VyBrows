import{d as o}from"./hooks.module.Cr9ozNN-.js";import{l as L,k as $}from"./preact.module.DE--1VBR.js";var U=0;function n(s,r,d,b,i,h){r||(r={});var m,c,a=r;if("ref"in a)for(c in a={},r)c=="ref"?m=r[c]:a[c]=r[c];var u={type:s,props:a,key:d,ref:m,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--U,__i:-1,__u:0,__source:i,__self:h};if(typeof s=="function"&&(m=s.defaultProps))for(c in m)a[c]===void 0&&(a[c]=m[c]);return L.vnode&&L.vnode(u),u}function V(s,r){if(!r)return n($,{children:s});const d=new RegExp(`(${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),b=s.split(d);return n($,{children:b.map((i,h)=>d.test(i)?n("mark",{class:"bg-yellow-200 text-black rounded px-1",children:i},h):n("span",{children:i},h))})}function X({allProducts:s,search:r,onSearch:d}){const[b,i]=o(1),h=Array.from(new Set(s.map(e=>e.category).filter(Boolean))),m=Array.from(new Set(s.map(e=>e.industry).filter(Boolean))),c=Array.from(new Set(s.flatMap(e=>e.techs||[]))),a=s.map(e=>e.members).filter(e=>typeof e=="number"),u=s.map(e=>e.months).filter(e=>typeof e=="number"),v=a.length?Math.min(...a):0,M=a.length?Math.max(...a):0,w=u.length?Math.min(...u):0,_=u.length?Math.max(...u):0,[k,N]=o([]),[S,D]=o([]),[T,z]=o([]),[g,B]=o(""),[x,E]=o(""),[p,F]=o(""),[y,K]=o(""),A=s.filter(e=>{const t=(e.title??"").toLowerCase().includes(r.toLowerCase()),l=k.length===0||e.category&&k.includes(e.category),f=S.length===0||e.industry&&S.includes(e.industry),H=T.length===0||e.techs&&e.techs.some(Q=>T.includes(Q)),J=g===""&&x===""||typeof e.members=="number"&&(g===""||e.members>=g)&&(x===""||e.members<=x),O=p===""&&y===""||typeof e.months=="number"&&(p===""||e.months>=p)&&(y===""||e.months<=y);return t&&l&&f&&H&&J&&O}),C=12,P=A.length,R=Math.ceil(P/C),j=A.slice((b-1)*C,b*C),I=(e,t)=>{e==="category"?N(l=>l.includes(t)?l.filter(f=>f!==t):[...l,t]):e==="industry"?D(l=>l.includes(t)?l.filter(f=>f!==t):[...l,t]):e==="tech"&&z(l=>l.includes(t)?l.filter(f=>f!==t):[...l,t]),i(1)},W=e=>{d(e.currentTarget.value),i(1)},q=e=>{e.preventDefault()},G=(e,t)=>{e.preventDefault(),i(t+1)};return n("div",{class:"flex flex-col md:flex-row gap-6 items-start",children:[n("aside",{class:"w-full md:w-72 bg-surface rounded-lg p-4 text-on-surface shadow mb-4 md:mb-0 md:sticky md:top-32 z-20 h-auto border border-border",children:n("form",{class:"space-y-4",onSubmit:q,autoComplete:"off",children:[n("input",{type:"text",placeholder:"Search projects...",class:"w-full border rounded p-2 mb-4",value:r,onInput:W,autoFocus:!0}),n("div",{class:"flex flex-col gap-4 mb-4",children:[h.length>0&&n("div",{children:[n("div",{class:"font-semibold mb-1",children:"Category"}),h.map(e=>n("label",{class:"block text-sm",children:[n("input",{type:"checkbox",checked:k.includes(e),onChange:()=>I("category",String(e)),class:"mr-1"}),e]},e))]}),m.length>0&&n("div",{children:[n("div",{class:"font-semibold mb-1",children:"Industry"}),m.map(e=>n("label",{class:"block text-sm",children:[n("input",{type:"checkbox",checked:S.includes(e),onChange:()=>I("industry",String(e)),class:"mr-1"}),e]},e))]}),c.length>0&&n("div",{children:[n("div",{class:"font-semibold mb-1",children:"Techs"}),c.map(e=>n("label",{class:"block text-sm",children:[n("input",{type:"checkbox",checked:T.includes(e),onChange:()=>I("tech",e),class:"mr-1"}),e]},e))]}),n("div",{children:[n("div",{class:"font-semibold mb-1",children:"Members"}),n("div",{class:"flex items-center gap-2",children:[n("input",{type:"number",min:v,max:M,value:g,onInput:e=>B(e.currentTarget.value===""?"":Number(e.currentTarget.value)),placeholder:`Min (${v})`,class:"w-16 border rounded p-1 text-sm"}),n("span",{children:"-"}),n("input",{type:"number",min:v,max:M,value:x,onInput:e=>E(e.currentTarget.value===""?"":Number(e.currentTarget.value)),placeholder:`Max (${M})`,class:"w-16 border rounded p-1 text-sm"})]})]}),n("div",{children:[n("div",{class:"font-semibold mb-1",children:"Months"}),n("div",{class:"flex items-center gap-2",children:[n("input",{type:"number",min:w,max:_,value:p,onInput:e=>F(e.currentTarget.value===""?"":Number(e.currentTarget.value)),placeholder:`Min (${w})`,class:"w-16 border rounded p-1 text-sm"}),n("span",{children:"-"}),n("input",{type:"number",min:w,max:_,value:y,onInput:e=>K(e.currentTarget.value===""?"":Number(e.currentTarget.value)),placeholder:`Max (${_})`,class:"w-16 border rounded p-1 text-sm"})]})]})]})]})}),n("section",{class:"flex-1 bg-surface rounded-lg text-on-surface w-full border border-border",children:[n("div",{class:"space-y-4",children:j.length===0?n("div",{class:"text-center text-on-surface/50 py-12",children:"Không có sản phẩm nào để hiển thị"}):j.map(e=>n("a",{href:e.link||"#",class:"block group",style:{textDecoration:"none"},children:n("div",{class:"flex items-start gap-4 bg-surface-1 rounded-lg shadow-lg border border-border hover:bg-surface-2 hover:shadow-2xl transition px-4 py-3 group-hover:shadow-2xl cursor-pointer",children:[n("div",{class:"flex-shrink-0 w-40 aspect-[16/9] bg-surface-2 rounded-lg flex items-center justify-center overflow-hidden",children:e.image?n("img",{src:e.image,alt:e.title??"",class:"object-cover w-full h-full rounded-lg"}):n("span",{class:"text-3xl text-on-surface/40",children:"📦"})}),n("div",{class:"flex-1 min-w-0",children:[e.title?n($,{children:[n("h2",{class:"text-lg font-semibold mb-1 truncate",children:V(e.title,r)}),(e.industry||e.category)&&n("div",{class:"flex gap-2 mb-1",children:[e.industry&&n("span",{class:"bg-surface-2 text-on-surface/80 px-2 py-0.5 rounded text-xs",children:["🏷️ ",e.industry]}),e.category&&n("span",{class:"bg-primary/10 text-primary px-2 py-0.5 rounded text-xs",children:["📂 ",e.category]})]})]}):null,e.description?n("p",{class:"text-on-surface/70 text-sm mb-2 truncate",children:e.description}):null,e.techs&&e.techs.length>0&&n("div",{class:"flex flex-wrap gap-1 mb-2",children:e.techs.map(t=>n("span",{class:"bg-primary/10 text-primary text-xs px-2 py-0.5 rounded",children:t}))}),e.members||e.months?n("div",{class:"flex items-center gap-4 text-xs text-on-surface/60 mb-1",children:[e.members&&n("span",{children:["👥 ",e.members," thành viên"]}),e.months&&n("span",{children:["⏳ ",e.months," tháng"]})]}):null]})]})}))}),n("div",{class:"flex justify-center mt-6 gap-2",children:Array.from({length:R},(e,t)=>n("a",{href:"#",onClick:l=>G(l,t),class:`px-3 py-1 rounded border ${b===t+1?"bg-primary text-on-primary":"bg-surface-1 text-primary hover:bg-primary/10"}`,children:t+1}))})]})]})}function ee({allProducts:s}){const[r,d]=o("");return n(X,{allProducts:s,search:r,onSearch:d})}export{ee as default};
